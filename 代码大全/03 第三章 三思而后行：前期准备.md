在开始建造房子之前，施工人员会审视蓝图，查看是否获得了全部许可证，并测量房屋的地基；软件构建也是一样，项目的成败在构建活动之前就已经注定了。

构建活动占整个项目成本的60%；糟糕的软件项目最终会进行俩三次(甚至更多)构建。
# 1. 前期准备的重要性
使用高质量的实践方法是创造创建高质量软件的方式；这些高质量的实践方法在项目的初期，中期，末期都强调高质量。

> 关注质量就是提高生产力的最佳途径

如果是在末期强调质量，那么我们就会强调系统测试；但是测试只是完整的质量保证策略的一部分，而且不是最有影响的部分。测试是不能检查出前期产品设计或者构建过程中的错误。

如果是在中期强调质量，那么我们就会强调构建实践。

如果是在初期强调质量，那么我们就会计划，要求并且设计一个高质量的产品。如果我们用奇瑞的设计来开始生产过程，无论如何努力，它也绝对不会变成劳斯莱斯。

可以看到，构建活动是软件项目的中期阶段，在我们已经开始构建的时候，项目的前期工作或多或少就已经为这个项目的成功或失败打下了基础。如果你已经看到了失败的乌云已经出现，就退回到前期准备工作吧。

接下来我们会指出为什么前期的准备工作很重要，并且会告诉你如何判定"是否已经准备好开始构建工作了"

## 前期准备适用于现代软件项目吗

> 如果在开始构建活动之前认真的进行适当的准备活动，那么项目会运转的极好

准备工作的中心目标是降低风险，一个好的项目规划者能够尽可能早地将主要的风险清除掉，以使项目的大部分工作都可以平稳的进行。由于最常见的风险是糟糕的需求分析和项目规划，因此准备工作就倾向于这两点。

构建活动的准备工作不是一门精准科学，它会随着项目的特点来选择特定的降低风险的方式，具体细节也会随项目的不同而变化较大。

## 准备不周全的诱因

* **做前期准备活动的人员不具备完成这一项任务的技能**。项目规划，需求分析等前期准备活动都需要一定的专业技能。如果不能把这件事情做好，那么做再多也没有意义
* **不能抵抗"尽快开始编码"的欲望**。切记：事先做好计划能避免很多压力。
* **管理者对前期准备活动不重视**。管理者对那些"花时间进行构建活动的前期准备的程序员"的冷漠已经到了人神共愤的程度。
> 如果你不幸遇到了这样的老板，那么你可以这样做：
> 1. 果断拒绝
> 2. 假装在写代码
> 3. 教育你的老板
> 4. 果断辞职

## 关于开始构建之前要坐前期准备的绝对有力且简明的证据
在实现一个系统之前，你需要理解**这个系统应该做什么**以及**它该如何做到这点**

**在开始编码，测试，调试之前进行需求分析和架构设计才能保证关键的方面都做对**这句话的根据在哪里呢，就让我们看看下面这些论据

* **诉诸逻辑**
    
    进行有效编程的要领之一是：准备工作很重要。大的项目开始之前需要大量的计划，而小的项目则可以少些。从管理的角度看，做计划就意味着确定项目所需要的时间，人数以及计算机台数；而从技术的角度看，做计划意味着弄清楚你想要建造的是什么。有时候用户一开始并不确定自己想要的是什么，因此需要花费比理想情况下更多的力气找出他们想要的东西，但是这总比**先做出一个错误的东西出来，然后扔掉从头来过**的成本要低廉的多。

    在做一个系统之前，先考虑如何去做也是非常重要的，我们都不希望花费大量的精力和金钱而走进死胡同。

* **诉诸类比**

    在建造一座房屋之前，我们需要在开始钉钉子之前准备好手绘草图(总体设计，架构设计)和蓝图(详细设计)。在浇筑混凝土之前也必须审核蓝图并获得批准。在软件领域做技术规划也包含同样多的事情。

    在把圣诞节立起来之前，你不会对它做装饰；在打开烟囱之前，你不会生活；在做软件时，你也必须按照正确的顺序去做

    如果把开发比作一条食物链，那么就是架构师吃掉需求，设计师迟到架构，而程序员则吃掉设计。程序员是处在食物链的最后一环。在健康的生态环境中，海鸥吃掉健康的鲑鱼，这对海鸥来说是营养丰富的大餐，隐喻鲑鱼吃掉的是新鲜的青鱼，而青鱼吃掉的是新鲜的水草；可以看出，如果每一层都是健康的食物，那么最终就能获得健康的代码。而如果青鱼吃掉的是在核废料的水里生长的水草，鲑鱼吃掉的是被污染的青鱼，而吃青鱼的鲑鱼还在充满原油的水里游荡，那么海鸥它吃下去的就不仅仅是原油，还有核废料等；在软件中也是一样，如果需求被污染了，那么它就会污染架构，架构最终会污染架构。

    如果是迭代项目的话，就像建造住宅小区一样，在建造第一栋房子之前，不需要知道房子的细节，但是却要制定下水道和电线的走向等，如果这些准备的不充足，那么很可能会出现像**需要在某所房子下面挖下水道**的问题；迭代软件时，我们也需要弄清楚那些是最关键的需求和架构要素，毕竟我们不想为了添加一个小功能而对架构进行大量的更改。

* **诉诸数据**

    > 发现错误的时间要尽可能接近引入该错误的时间，错误在软件食物链中待得时间越长，它对食物链的后级造成的损害就越严重。

    如下是"引入错误的时间和找到错误的时间"与"修复缺陷的费用"之间的关系；横轴表示检测到错误的时间

    |引入错误的时间|需求|架构|构建|系统测试|发布之后|
    |---|---|---|---|---|---|
    |需求|1|3|5-10|10|10-100|
    |架构|-|1|10|15|25-100|
    |构建|-|-|1|10|10-25|

# 2.辨明你所从事的软件的类型

软件开发中，有几百种编程语言，40种收集需求的方法，50种进行软件设计的方法，30种针对软件测试的方法；不同种类的软件项目，需要在"准备工作"和"构建活动"之间做出不同额平衡。

下表列出了三种最常见的软件项目列表，并且列出了各种项目最适合的典型实践，其中横轴是指软件种类：

||商业系统|使命攸关的系统|性命攸关的系统|
|---|---|---|---|
|典型应用|Internat站点<br/>Intranet站点<br/>库存管理<br/>游戏<br/>管理信息系统(MIS)<br/>工资系统|嵌入式软件<br/>游戏<br/>Internet站点<br/>盒装软件<br/>软件工具<br/>Web services|航空软件<br/>嵌入式软件<br/>医疗设备<br/>操作系统<br/>盒装软件|
|生命周期模型|敏捷开发(极限编程，Scrum，time-box开发等)<br/>渐进原型(prototyping)|分阶段交付<br/>渐进交付<br/>螺旋型开发|分阶段交付<br/>螺旋型开发<br/>渐进交付|
|计划于管理|增量式项目计划<br/>随需测试与QA计划<br/>非正式的变更控制|基本的预先计划<br/>基本的测试计划<br/>随需QA计划<br/>正式的变更控制|充分的预先计划<br/>充分的测试计划<br/>充分的QA计划<br/>严格的变更控制|
|需求|非形式化的需求规格|半形式化的需求规格<br/>随需的需求评审|形式化的需求规格<br/>形式化的需求检查|
|设计|设计与编码是结合的|架构设计<br/>非形式化的详细设计<br/>随需的设计评审|架构设计<br/>形式化的架构检查<br/>形式化的详细设计<br/>形式化的详细设计检查|
|构建|结对编程或独立编码<br/>非正式的check-in手续或没有check-in手续|结对编程或独立编码<br/>非正式的check-in手续<br/>随需代码评审|结对编程或独立编码<br/>正式的check-in手续<br/>正式的代码检查|
|测试与QA|开发者测试自己的代码<br/>测试先行开发<br/>很少或没有测试(由单独的测试小组来做)|开发者测试自己的代码<br/>测试先行开发<br/>单独的测试小组|开发者测试自己的代码<br/>测试先行开发<br/>单独的测试小组<br/>单独的QA小组|
|部署|非正式的部署过程|正式的部署过程|正式的部署过程|

在真实项目中，你会找到表中三种主调的无数种变种，以上只是列出了它们的共性；开发的商业系统的项目往往受益于高度迭代的开发法，**这种方法的"计划，需求，架构"活动与"构建，系统测试，质量保证"活动交织在一起**。性命攸关的系统往往采用更序列式的方法，**因为"需求稳定"是确保"超高等级的可靠性"的必备条件之一**。

## 迭代开发法对前期准备的影响
    
迭代方法往往能够减少"前期准备不足"所造成的负面影响，但是它不能完全消除此影响。

一般情况下，在"前期准备量"一定的时候，迭代开发的成本要比序列开发的成本低得多。但是**前期准备**依旧是最重要的环节;预先详细说明所有的需求和设计是不切实际的，**但还是应该尽早的把那些最关键的需求和架构要素确定下来**。以下是俩种比较好的经验：
1. 预先完成80%的前期准备，然后给剩下的20%添加说明并预留时间，在项目进行过程中，实施系统化的变更控制措施，只接受最有价值的新需求
2. 预先完成20%的前期准备，然后以小幅增量的方式完成剩余部分，随着项目的进行，对额外的需求和设计做出详细说明。

## 在序列式开发法和迭代式开发法之间做出选择

以下是选择序列化开发法的一些原因：

* 需求相对稳定
* 设计直接了当，而且理解透彻
* 开发团队对于这一业务领域非常熟悉
* 项目的风险很小
* "长期可预测性"很重要
* 后期改变需求，设计和编码的代价可能很昂贵

以下是你选择迭代式开发法的一些原因：

* 需求并没有被理解透彻，或者处于其它原因你认为他是不稳定的
* 设计很复杂，或者具有挑战性，或者两者兼具
* 开发团队对于这一业务领域不熟悉
* 项目存在很多风险
* "长期可预测性"不重要
* 后期改变需求，设计和编码的代价可能很低


在软件开发中，使用迭代式开发法的情况比适合序列式开发法的情况要多得多，你可以调整前期准备的完备情况和正式情况以适应开发方式。**大型项目和小型项目的开发方法也是不同的**

你应该首先确定哪些前期准备适用于你的项目，准备太少则可能会导致后期的会有更多的变动，准备太多则会导致做了太多无用工作(后期被证实无用的准备)而阻塞后期活动的进行。

接下来，我们看一下：如何判断每一项特定的前期准备工作是否到位

# 3.问题定义的先决条件

在开始构建之前，首先要满足的一项先决条件就是**对这个系统要解决的问题做出清楚的陈述**。问题定义也被称作**产品设想/product vision**，**设想陈述/vision statement**，**任务陈述/mission statement**或**产品定义/product definition**。这里我们称它为问**问题定义/problem definition**

**问题定义**只是**定义了问题是什么**，不涉及任何的解决方案。例如："我们跟不上Gigatron的订单了"这句话听起来像个问题，这就是一个很好的问题定义；"我们需要优化我们的系统，使我们跟上Gigatron的订单"这句话包含了解决方案，就是一个糟糕的问题定义。

问题定义应该用用户理解的语言去描述，应该从客户的角度来描述问题；通常不应该用计算机的专业术语描述(除非针对的客户是计算机相关的)，并且最终最好的解决方案不一定是一个计算机程序；有时候传统的解决方案要快速并灵活很多。

如果没有一个良好的问题定义，你努力解决的问题就可能是一个错误的问题。最终要解决的目标都是错的。如下图所示

![](resources/picture/3_1.jpg)

"未能定义问题"的处罚是，你浪费了大量时间处理错误的问题，同时你也没有解决正确的问题。

问题定义在具体的需求分析工作之前，而需求是对问题定义的深入调查，如下图

![](resources/picture/3_2.jpg)

# 4.需求的先决条件

**需求**详细描述软件系统应该做什么，这是达成解决方案的第一步。需求活动也被称为**需求开发/requirements development**，**需求分析/requirements analysis**，**分析/analysis**，**需求定义/requirements definition**，**软件需求/software requirements**，**规格书/specification**，**功能规格书/functional spec**，**规格/spec**。

## 为什么要有正式的需求

要求一套名曲的需求，这点很重要。理由很多，下面列出几点

* 明确的需求可以保证是用户(而不是程序员)驾驭系统。如果需求不明确，程序员就会常常在编码时自行决定需求。明确的需求免得你去猜测用户想要的是什么。
* 明确的需求有助于避免争论。如果你和另一个程序员去争执程序应该做什么，就可以查看书面的需求以解决分歧
* 明确的需求有助于减少编程开发之后的系统变更情况。需求阶段引入的错误在编码阶段进行更改代价是巨大的。
* 明确的需求是项目成功的关键，它有时甚至比有效的构建技术更为重要。

如果没有好的需求，你可能对问题有总体把握，但却没有击中问题的特定方面
![](resources/picture/3_3.jpg)

## 稳定需求的神话

稳定的需求是软件开发的圣杯(圣杯一词暗指希望渺茫)，一旦需求稳定，项目就能以有序的，可预测的，平稳的方式完成架构到设计到编码到测试等一系列工作。

"一旦客户接受了一份需求文档，就再也不改变"是一个美好的愿望。实际上，在编写代码之前，客户是无法可靠的去描述他们想要的是什么。就和你做项目的时间越长就对项目越了解一样，客户也是随着项目的进行理解逐步深入。这往往是需求变更的主要来源。

不过我们可以采取一些步骤使需求变更的负面影响最小化

## 在构建期间处理需求变更

在构建期间，我们可以使用以下方式处理好构建期间的需求变更

* **使用下面的需求核对表来评估需求的质量**。如果需求不够友好，就停止工作，退回去，把它做好再继续前进。
![需求核对表1](resources/picture/3_4_1.png)
![需求核对表2](resources/picture/3_4_2.png)

* **确保每一个人都知道需求变更的代价**。对客户来说，要让他知道需求变更的代价，比如进度和成本等。

* **建立一套变更控制程序**。如果客户还是热情不减，那就考虑建立一个变更控制委员会，审批所有变更并在特定的时间处理这些变更。

* **使用能适应变更的开发方法**。可以考虑使用迭代开发法，增量开发

* **放弃这个项目**。这个需要谨慎的考虑。

* **注意项目的商业案例**。有时需求作为功能来讲是个不错的想法，但是可能在评估了"在商业上的价值"的时候，就会是一个很糟糕的主意。




    




